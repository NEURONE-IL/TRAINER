<form id="hola">
  <div *ngFor="let my_quiz of quiz">
    <ng-template [ngIf]="my_quiz._id == quizNumber">
      <mat-card-subtitle>{{my_quiz.name}}</mat-card-subtitle>
      <ng-template [ngIf]="exerciseActual == 0">
        <h6>Instrucciones quiz: {{my_quiz.instructions}}</h6>
        <p>Resource quiz: {{my_quiz.resource_url}}</p>
        <button (click)="increaseExercise(false)">Tomar quiz</button>
      </ng-template>
      <div *ngFor="let exercise of my_quiz.exercises; let last_exercise = last; let first_exercise = first;">
        <ng-template [ngIf]="exercise.exercise_id == exerciseActual">
          <h6>Ejercicio {{exercise.exercise_id}}: {{exercise.introduction}}</h6>
          <div class="quiz_questions" *ngFor="let question of exercise.questions">
            <mat-card class="question-card">
              <h6>Pregunta {{question.question_num}}</h6>
              <ng-template [ngIf]="resourceExist(question.question_id)">
                <img src="/assets/videoModule-images/{{question.question_id}}.png">
              </ng-template>
              <p>{{question.question}}</p>


              <ng-template [ngIf]="question.question_type == 1">
                  <textarea class="textarea-question answer" (change)="inputTextArea(question.question_id, 'textarea')"  name="answer_{{question.question_id}}"></textarea>
                  <div class="bonus-class" *ngIf="question.bonus">
                    <p>{{question.bonus}}</p>
                    <input class="input-text" type="text" (change)="inputTextArea(question.question_id, 'text')" name="answer_bonus{{question.question_id}}">
                  </div>
              </ng-template>


              <ng-template [ngIf]="question.question_type == 2">
                  <div class="alternatives-class" *ngFor="let alternative of question.alternatives; let i = index">
                    <label><input class="answer" type="radio" (click)="eventAnswers(question.question_id, alternative, i, 'radio')" id="answer_{{question.question_id}}_alt_{{i}}" name="answer_{{question.question_id}}" value="[{{i}}]{{alternative}}"> {{alternative}}</label>
                  </div>
                  <div class="bonus-class" *ngIf="question.bonus">
                    <p>{{question.bonus}}</p>
                    <input class="input-text" type="text" (change)="inputTextArea(question.question_id, 'text')" name="answer_bonus{{question.question_id}}">
                  </div>
              </ng-template>


              <ng-template [ngIf]="question.question_type == 3">
                  <div class="alternatives-class" *ngFor="let alternative of question.alternatives; let i = index">
                    <label><input class="answer" type="checkbox" (click)="eventAnswers(question.question_id, alternative, i, 'checkbox')" id="answer_{{question.question_id}}_alt_{{i}}" name="answer_{{question.question_id}}" value="[{{i}}]{{alternative}}"> {{alternative}}</label><br>
                  </div>
                  <div class="bonus-class" *ngIf="question.bonus">
                    <p>{{question.bonus}}</p>
                    <input class="input-text" type="text" (change)="inputTextArea(question.question_id, 'text')" name="answer_bonus{{question.question_id}}">
                  </div>

              </ng-template>


            </mat-card>
          </div>


          <div class="quiz_buttons">
            <ng-template [ngIf]="first_exercise">
              <button (click)="decreaseExercise(first_exercise)" disabled>Atras</button>
            </ng-template>
            <ng-template [ngIf]="!first_exercise">
              <button (click)="decreaseExercise(first_exercise)">Atras</button>
            </ng-template>
            <ng-template [ngIf]="last_exercise">
              <button (click)="increaseExercise(last_exercise)" disabled>Siguiente</button>
            </ng-template>
            <ng-template [ngIf]="!last_exercise">
              <button (click)="increaseExercise(last_exercise)">Siguiente</button>
            </ng-template>
          </div>
          <div class="quiz_buttons">
            <button class="quiz_buttons" (click)="sendQuiz()">Enviar Formulario</button>
          </div>

        </ng-template>
      </div>
      <ng-template [ngIf]="exerciseActual == -1">
        <h6>Respuestas recibidas!</h6>
      </ng-template>

    </ng-template>
  </div>

  <!--<button (click)="sendQuizResponse('Atras')">Atras</button>
  <button (click)="sendQuizResponse('Enviar')">Enviar</button>
  <input type="submit" value="Enviar Cuestionario">-->
</form>

